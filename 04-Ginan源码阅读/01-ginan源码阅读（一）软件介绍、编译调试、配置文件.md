[TOC]

## 一、Ginan 介绍

### 1、软件简介





### 2、代码分析



* 

* 用 cloc 统计 src 文件夹，结果如下：

  ![image-20230808154537347](https://pic-bed-1316053657.cos.ap-nanjing.myqcloud.com/img/image-20230808154537347.png)



### 3、PEA（parameter estimation algorithm）

> usingThePea.md、peaUser.md、peaNetwork.md、peaConfig.md、defaultConfiguration.md

* **Network mode**：多个参考站一起处理，用于估计参数，生成校正产品。
* **User mode**：不同观测站单独处理，用于进行精密定位。

软件的流程基本上是按顺序进行的，确保开发人员和用户都能简单理解。该流程的主要组成部分概述如下：

#### 1.数据输入与同步

在处理一个历元的数据之前，要先获取相关的数据，由于这个过程对很多地方都有影响，所有单独作为一个进程。

* **配置文件**：YAML格式，每个历元开始都会读取配置文件的时间戳，如果发现有修改，会把新的配置读进来。
* **产品输入**：每个历元的开始，如果配置文件中有新产品写入或修改，会读进来。
* **元数据输入**：每个历元开始前，可从外部来源获取星历等元数据，以增强软件的功能。
* **观测数据输入**：观测数据是软件运行的基础。在每个历元开始处理之前，进行同步和整理。软件采用继承和多态模式，所有数据类型的输入均可使用单一的流程进行处理，并由后台功能执行所需的检索和解析。观测数据按时间戳同步，当请求特定时间戳的数据时，在处理过程中使用与该时间戳相对应的观测数据之前，会对该时间戳之前的所有数据进行解析（但可能会丢弃）。

* **对象初始化**：在接下来的处理阶段，会在全局对象中创建许多特定于接收机的对象。为防止全局对象中出现线程碰撞，接收机对象在此时先创建。

#### 2. 预处理

输入数据之后进行预处理，检测异常和可用性。这样就能低延迟地报告问题，并为后期运行阶段更高效地处理数据做好准备。包括：周跳检测、低延时的异常检测、缺失数据检测、输出报告。

#### 3. 精密单点定位

* 动力学模型：

* 轨道和状态预测：
* 误差建模和估计：
* 参数初始化：
* 鲁棒卡尔曼滤波：
* RTS平滑：
* 整周模糊度求解：
* 产品计算：

#### 4. 后处理

* 平滑：
* 最小化约束：
* 单元测试：

#### 5. 日志和输出





### 4、POD（precise orbit determination）

> usingThePod.md、podConfig.md、podExamples.md

POD 模块有两种主要运行模式：**轨道拟合**、**轨迹预测**。

#### 1. 轨道拟合

根据可能不准确的卫星位置伪距观测数据计算出精确的轨道参数。



#### 2.轨迹预测

在**轨迹预测**模式下，根据精确的轨道参数估计/预测精确的卫星位置。







## 三、编译调试







## 四、PEA 配置文件

PEA 使用单个YAML文件作为配置文件，





























