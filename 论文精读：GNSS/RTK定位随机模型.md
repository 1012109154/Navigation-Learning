### 一、观测值随机模型

观测值的随机模型表征的是 GNSS 观测值的统计特性，包括不同观测值之间的相关性和各类观测值的测量精度，可以通过先验方差-协方差矩阵来表达。本文采用高度角模型，高度角越多权重越高，有以下三种：

正弦函数形式：
$$
\sigma^{2}=m^{2}+\frac{n^{2}}{\sin ^{2}(e l)}
$$
余弦函数形式：
$$
\sigma^{2}=a^{2}+b^{2} \cos ^{2}(e l)
$$
指数函数形式：
$$
\sigma=a_{0}+a_{1} \exp \left(e l / h_{0}\right)
$$
式中，$m$、$n$、$a$、$b$、$a_0$、$a_1$ 以及 $ℎ_0$ 均为经验系数，$el$ 表示以弧度为单位的高度角。本文主要用以下形式的模型：
$$
\sigma^{2}(\theta)=\sigma_{0}^{2}\left(1+10 \exp \left(\frac{-\theta}{10}\right)\right)^{2}
$$
其中，$\sigma^{2}(\theta)$表示非差观测值的标准差；⁡$\sigma_{0}$表示天顶方向的非差观测值的标准差；$\theta$表示卫星高度角（单位：弧度）。利用非差观测值的方差，根据误差传播定律， 可以得到双差观测值的方差

* 通常将同一GNSS系统的伪距和相位观测值的标准差比值设置为 1:100
* 不同频点的伪距和相位观测值的标准差分别设置为 0.3 m 和 3 mm
* 不同GNSS 系统的同类观测值，可认为GPS、BDS：GLONASS为1:1.5

设站间单差伪距和相位观测值方差-协方差矩阵 $R$，进行星间差分的映射矩阵为 $D$，则双差伪距和相位观测值的方差-协方差矩阵可以表示为：
$$
Q=DRD^T
$$
对于系统内差分模型，双频观测值星间差分的映射矩阵 $D$ 为：
$$
D=\left[\begin{array}{ll}
I_{4} \otimes D_{\left(m_{A}-1\right) \times m_{A}}^{A} & I_{4} \otimes 0_{\left(m_{A}-1\right) \times m_{B}} \\
I_{4} \otimes 0_{\left(m_{B}-1\right) \times m_{A}} & I_{4} \otimes D_{\left(m_{B}-1\right) \times m_{B}}^{B}
\end{array}\right]
$$
而对于系统间差分模型，映射矩阵 $D$ 需要考虑两个系统间的星间差分：
$$
D=\left[\begin{array}{cc}
I_{4} \otimes D_{\left(m_{A}-1\right) \times m_{A}}^{A} & I_{4} \otimes 0_{\left(m_{A}-1\right) \times m_{B}} \\
I_{4} \otimes D_{m_{B} \times m_{A}}^{A B} & I_{4} \otimes I_{m_{B}}
\end{array}\right]
$$
$$
\begin{array}{l}
D_{\left(m_{A}-1\right) \times m_{A}}^{A}=\left[-e_{m_{A}-1}, I_{m_{A}-1}\right] \\
D_{\left(m_{B}-1\right) \times m_{B}}^{B}=\left[-e_{m_{B}-1}, I_{m_{B}-1}\right] \\
D_{m_{B} \times m_{A}}^{A B}=\left[-e_{m_{B}}, 0_{m_{B} \times\left(m_{A}-1\right)}\right]
\end{array}
$$

其中$\otimes$表示**克罗内克积**算子；$e_m$ 表示元素均为 1 的 m 维列向量；$I_m$ 表示 $m$ × $m$ 的单位矩阵；$0_{m*n}$ 表示元素均为 0 的 $m$ × $n$ 维矩阵；$m_A$ 和 $m_B$ 分别表示系统 A 和 系统 B 在某一历元所观测到的卫星数。

> 克罗内克积 $A \otimes B$ 是两个任意大小的矩阵间的运算，如果*A*是一个 $m×n$ 的矩阵，而*B*是一个$p×q$ 的矩阵，**克罗内克积**则是一个 $mp×nq$ 的分块矩阵：
> $$
> A \otimes B=\left[\begin{array}{ccc}
> a_{11} B & \cdots & a_{1 n} B \\
> \vdots & \ddots & \vdots \\
> a_{m 1} B & \cdots & a_{m n} B
> \end{array}\right]
> $$
>

### 二、参数的随机模型

GNSS相对定位中的待估参数一般包括：三维坐标参数、大气延迟参数以及模糊度参数，由于

* 接收机的运动状态及其随时间的变化规律通常都是未知的，
* 电离层延迟的一阶项可以通过无电离层组合观测值进行消除

因此三维坐标参数和电离层延迟参数的随机模型通常不予考虑。 在 GNSS相对定位数据处理过程中，主要考虑的是对流层延迟残差参数和模糊度参数的随机模型。 

#### 1、对流层参数随机模型

通过一阶高斯马尔可夫过程来描述对流层延迟天顶方向的湿分量：
$$
\frac{d \rho(t)}{d t}=-\frac{\rho(t)}{t_{G M}}+\omega(t)
$$
式中，$t_{GM}$ 表示随机过程的相关时间，$\omega(t)$ 是方差为 $\sigma_{\omega}^{2}$ 的零均值白噪声：

在对流层延迟随机游走模型中，$\sqrt{q_{i} / \Delta t}$ 通常取 $2 \sim 4 \times 10^{-7} \mathrm{~km} \cdot \mathrm{s}^{-1 / 2}$

#### 2、模糊度参数的随机模型

* 根据**系统类型**、**基线长度**和**差分模式**的不同，需要对模糊度参数的随机模型进行差异化设置。
* 由于模糊度参数中可能包含了接收机和卫星端的硬件延迟以及初始相位偏差，通过重参数化，分离为整周模糊度参数和偏差参数。
* 在连续跟踪时段内，**模糊度参数**为某一**常数**，当发生周跳或卫星失锁的情况下需要对其重新初始化。
* 而**偏差参数**（如：DISB, DIFB）通常采用**分段常数**来描述其随机过程。