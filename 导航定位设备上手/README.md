![navigation-hardware-cover](https://pic-bed-1316053657.cos.ap-nanjing.myqcloud.com/img/navigation-hardware-cover.png)

[TOC]

---

导航定位，肯定给载体导航，定载体的位，脱离不了硬件，

对硬件对仪器了解，

不能只会算数据集，



记录导航定位设备的基本使用，包括 GNSS、IMU、Camera、Lidar 等，先介绍各种设备的原理、基本使用方式、注意事项；然后再介绍我用过的一些设备，包括它们的特性，交互方式，怎么配置、标定、连开发板，上位机怎么用，和简单的性能评测，还会提供一些短时测试数据，以及在开源程序上的解算情况；目前已记录和准备记录的设备包括：

|   设备类型   |                          已介绍设备                          |
| :----------: | :----------------------------------------------------------: |
|   **GNSS**   | ATK1218 、和芯星通 UM982、创新微 MS34N2、华测 B380、septentrio mosaic-5 、HackRFone |
|   **IMU**    |          MPU6050、原级科技 FSS-IMU16460、ADIS16470           |
| **GNSS+IMU** |                         北云科技 X1                          |
|  **Camera**  |                           奥比中光                           |
|  **Lidar**   |                             司岚                             |

---

## GNSS



GNSS 接收机可以用于测绘、导航、

GNSS 接收机的形式也有很多

板卡、模块、整机、芯片





学界对于 GNSS 的研究

* 授时：
* 对流层建模：
* 电离层建模：
* 重力场：
* 海平面：

本篇还是主要



GNSS 的基本原理是空间后方交会

我们知道



距离是由信号传播时间

时间的准确性至关重要，1ns 的时间误差引起 3m 的定位误差

卫星上的时间由原子时来维持

而接收机上只有低成本的晶振，

接收机钟差也作为参数估计





高精度的定位解算方法包括：

* RTK：
* PPP：模糊度固定和实时快速 PPP 是目前主要的研究方向
* PPP-RTK：区域参考网增强精密单点定位

> 推荐阅读：[学术交流丨辜声峰：从RTK、PPP到PPP-RTK](https://mp.weixin.qq.com/s?__biz=MzI1NTA2MzYxMg==&mid=2650089381&idx=4&sn=95172abc0d83410c2b861343f52294ba)





GNSS 板卡是由基带芯片、射频芯片、外围电路和相应的嵌入式控制软件制成带输入输出接口的基础集成电路板，是高精度GNSS接收机的核心部件；模块是集成度更高的板卡。







有些接收机带IMU，

有些接收机带通信，





上面介绍的是接收机的内部原理，

如果不做信号层的算法，了解即可，

做数据处理算法，把 GNSS 接收机内部当成，我们只需要知道接收机输出了：

* **测码伪距**：
* **载波相位**：在高精度数据算法中发挥了关键的作用
* **多普勒频移**：用来定速，精度比伪距高
* **信噪比**：用于衡量观测值质量，也用于反演
* **导航电文**：
  * **星历**：
  * **历书**：
  * **卫星钟差**：
  * **跳秒信息**：
  * **电离层模型**：
  * **TGD**：
  * **偏差参数**：
  * **PPP 改正**：Galileo HAS、北斗 B2b
  * 





小米 8 算是是最早支持双频 GNSS 数据输出的手机，有不少研究手机定位的论文，都基于小米 8；

23 年华为 Mate 60，已经可以输出四频北斗数据，但听说因为鸿蒙系统的限制，无法获取 GNSS 原始数据





GNSS 接收机输出的主要有三种：

* NMEA：
* RTCM：
* 接收机原始数据：





主流的接收机大多提供上位机，





卫导原理：空间交会定位





卫星信号发射功率也就二三十瓦，传到地面被接收机天线的时候非常低了，



接收机的内部实现，和通信设备很相似，几乎就是一样的

很多软件接收机的，

有专用的 GNSS 射频芯片，通用射频芯片

UARP、HackRF 等软件接收机，既可以通信，也可以做 GNSS 接收机

很多 GNSS 接收机都是电子通信相关专业在做，做 GNSS 基带算法的可以很方便的转向 6G 接收机原型开发，

做通信的也很容易转向 GNSS 接收机研发，

我想正是应为这样，民用 GNSS 接收机才发展的如此迅速



接收机质量的性能好坏很大程度上取决于基带算法，



串联器件的噪声指数主要取决于第一级器件，

所以第一级往往是低噪声放大器

有源天线







最后总结一下，对于一款 GNSS 接收机，咱们应该重点关注的东西：

* **卫星系统数**：现在主流是六大系统：美国 GPS、俄罗斯 GLONASS、中国 BDS、欧洲 Galileo、印度 IRNSS、日本 QZSS。
* **每个系统的频点数**：是否支持北斗三新频点，
* **输出数据类型**：可以输出 RTCM 或其它形式的原始数据，还是是只支持输出 NMEA 定位结果
* **是否支持差分解算**：就是传入差分数据到接收机，能进行 RTK、RTD 计算
* **电压范围**：对于板卡一般是 9~36V，对于模块一般是 CMOS、TTL 电平
* **是否支持 PPS 输出**：
* **是否支持有源天线**：如果不支持，那就不能用太长的馈线
* **上位机**：功能是否完善，其实这条也没那么重要，因为我们可能只有测试的时候用上位机
* **手册是否完善**：
* **是否有测试数据**：
* **其它功能**：双天线、惯导、通信、抗欺骗、电离层抑制、可编程IO、插 SD 卡存数据、









---

## IMU

> 推荐视频：计算机视觉life-



IMU 基本原理是惯性平台 + 三轴加速度计







ADIS、超核电子、



IMU 的价格从几元钱到几百万的都有，

高精度的激光IMU组合导航常用于



转台用于 IMU 标定，一台要几十甚至上百万，



最后总结一下，对于一款 IMU，咱们应该重点关注的东西：

* **陀螺仪零偏**：影响惯导性能最重要的指标，引起三阶的定位误差，战术级 IMU 是 1°/h；
* **输出数据、模式配置的接口**：
* **是否输出增量数据**：
* **IMU 中心位置**：
* **有无温度补偿**：

* **是否支持外部触发同步**：
* **是否支持 PPS 时间同步**：
* **是否支持里程计数据输入**：
* **输出数据格式**：
* **能否输出时间戳**：
* **Allan 方差曲线图**：
* **是否支持姿态解算**：
* **手册是否完善**：
* **是否有测试数据**：
* **其它功能**：磁力计、



---

### 01-MPU6050



很多单片机教程的 IIC 实验就是读取 MPU6050 的数据，

> 推荐阅读：[Arduino教程：MPU6050的数据获取、分析与处理](https://www.geek-workshop.com/thread-15392-1-1.html)



---

## GNSS+IMU 组合导航





最后总结一下，对于一款组合导航，咱们应该重点关注的东西：

* **上文总结过的 GNSS 接收机和 IMU 需要关注的所有东西**；
* **安装模式**：
* **进入导航状态的条件**：
* **初始对准**：
* **深组合**：
* **杆臂配置**：
* **上位机**：





---

## Camera





* 普通相机，包括鱼眼、球形、广角
* 双目相机，
* RGBD相机，



测距原理：

* 单目相机：
* 双目相机：
* RGBD相机：主流的深度相机有结构光、时间飞行法、双目立体三种





微软 Kinect、英特尔 RealSense、[奥比中光 ORBBEC](https://www.orbbec.com/)、OAK、DUO、PrimeSense



有些相机带 IMU，



相机的内参和外参







---

## Lidar





激光雷达，包括传统的机械激光雷达和固态激光雷达

机械激光雷达有单线、有多线

单线支持 2D 建图，多线支持 3D 建图





---

## UWB



室内定位技术中，使用最广泛的当属 UWB



室内外无缝定位



UWB 成本较高，



UWB 的几种测距值：

* TOA
* TDOA
* AOA



UWB 的几种定位方法

* 



UWB 涉及到多个定位基站，时间同步是比较关键的事，对精度影响相当大

而且不像 GNSS 内部有原子钟，UWB 内部只有低成本的晶振

包括各基站间的时间同步和基站与流动站的时间同步

不同的定位解算方法对于时间同步的需求不同







